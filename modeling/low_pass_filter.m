%% filter coeffecients %%
h = [...
        -0.000453393606126709493384790983228072037;...
         0.000479735812780970308135536361859863064;...
         0.000862082722951551506072875863395665874;...
        -0.000000000000000001537357131517255389396;...
        -0.001178631675972497024063034842811248382;...
        -0.000875915538266494532633477110294961676;...
         0.00105996946865529232360836342508036978 ;...
         0.002076569179276004095680008276758599095;...
        -0.00000000000000000322771046949826828719 ;...
        -0.003010542081617690636508033463769606897;...
        -0.002221317236098873954680543718609442294;...
         0.002635350335611494603654803015047036752;...
         0.005027822982406122964693651056222734042;...
        -0.000000000000000006071741904117281245858;...
        -0.006873301578061954270060240901329962071;...
        -0.004930548653080272895887770090439516935;...
         0.005699993246029023963306059386013657786;...
         0.010627142707749415509455026551677292446;...
        -0.000000000000000009437140478492861345136;...
        -0.014016347219432206960831877040618564934;...
        -0.009933196351378553029531914830840833019;...
         0.011394348015500615003969819838403054746;...
         0.021182880901727742239959439984886557795;...
        -0.000000000000000012575680147389365388556;...
        -0.028285397899600373677886366863276634831;...
        -0.020407163112107638142100896061492676381;...
         0.0240883861252986289369637518120725872  ;...
         0.046752465352924911512477734731874079444;...
        -0.000000000000000014789572202463581132166;...
        -0.073160318113006370110973364262463292107;...
        -0.061179994949448340824105230240093078464;...
         0.092735081194303931040323618617549072951;...
         0.301982267832822726116859257672331295907;...
         0.399843944272318840837954212474869564176;...
         0.301982267832822726116859257672331295907;...
         0.092735081194303931040323618617549072951;...
        -0.061179994949448340824105230240093078464;...
        -0.073160318113006370110973364262463292107;...
        -0.000000000000000014789572202463581132166;...
         0.046752465352924911512477734731874079444;...
         0.0240883861252986289369637518120725872  ;...
        -0.020407163112107638142100896061492676381;...
        -0.028285397899600373677886366863276634831;...
        -0.000000000000000012575680147389365388556;...
         0.021182880901727742239959439984886557795;...
         0.011394348015500615003969819838403054746;...
        -0.009933196351378553029531914830840833019;...
        -0.014016347219432206960831877040618564934;...
        -0.000000000000000009437140478492861345136;...
         0.010627142707749415509455026551677292446;...
         0.005699993246029023963306059386013657786;...
        -0.004930548653080272895887770090439516935;...
        -0.006873301578061954270060240901329962071;...
        -0.000000000000000006071741904117281245858;...
         0.005027822982406122964693651056222734042;...
         0.002635350335611494603654803015047036752;...
        -0.002221317236098873954680543718609442294;...
        -0.003010542081617690636508033463769606897;...
        -0.00000000000000000322771046949826828719 ;...
         0.002076569179276004095680008276758599095;...
         0.00105996946865529232360836342508036978 ;...
        -0.000875915538266494532633477110294961676;...
        -0.001178631675972497024063034842811248382;...
        -0.000000000000000001537357131517255389396;...
         0.000862082722951551506072875863395665874;...
         0.000479735812780970308135536361859863064;...
        -0.000453393606126709493384790983228072037;...
    ];
H = int16(h*2^15);
%% input signal %%
Fs = 5*10^6;
Ts = 1/Fs;
f = 100*10^3;
t = 0:Ts:20*10^(-6);
%x = sin(2*pi*f*t);

plot (t,x);
title("original signal plot");
figure();
%% Convolution %%
y = conv(x,h);
plot(y);
title("convolution plot");
X = int16(x'*2^15);
% %% direct form 1 implementation %%
% accum = 0;
% Y = zeros(length(x)+length(h)-1,1);
% reg = zeros(1,67);
% for i=1:length(X)+length(h)-1
%     for j=0:65
%         reg(67-j)=reg(67-j-1);
%     end
%     if(i<=501)
%         reg(1) = X(i);
%     else
%         reg(1) = 0;
%     end
%     Y(i) = reg*double(H);
% end
%    figure;
%    
%    plot(Y); 
%    title("direct form 1");
   %% converting H to hexadecimal %%
  hex_of_impulse_response = convertToSignedHex16Bit(-32768);